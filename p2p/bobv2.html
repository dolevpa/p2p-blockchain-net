<!DOCTYPE html>

<html>

<head>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
    <script>
        // const peer = new Peer('someid',{port: 9000, host:''});
        //   console.log(peer)
        // const peer = new Peer('someid', {
        //   host: 'localhost',
        //   port: 9000,
        //   path: '/'
        // });
        var peer = new Peer('bob', {
            host: 'localhost',
            port: 9000,
            path: '/'
        });
        peer.on('open', function (id) {
            console.log('My peer sID is: ' + id);
            let connect = peer.connect('alice');
            const conn = peer.connect('another-peers-id');
            conn.on('open', () => {
                conn.send('hi!');
            })});

            // while (1) {
            //     connect.send('hello')
            // }
            // connect.on('open' ,()=> console.log("hi alice"))

            const sendMessage = () => {
                connect.on('open', () => {
                    console.log(connect);
                    connect.send('hi!!!!!!!')

                })

            }




    </script>

    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!-- <link rel='stylesheet' type='text/css' media='screen' href='main.css'> -->
    <!-- <script src='main.js'></script> -->
</head>

<body>

    <button id='test' onclick="sendMessage()">send</button>
</body>

</html>